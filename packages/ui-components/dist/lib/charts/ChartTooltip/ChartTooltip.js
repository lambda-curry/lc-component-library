var N=Object.defineProperty,S=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var w=(o,a,t)=>a in o?N(o,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[a]=t,i=(o,a)=>{for(var t in a||(a={}))g.call(a,t)&&w(o,t,a[t]);if(p)for(var t of p(a))x.call(a,t)&&w(o,t,a[t]);return o},f=(o,a)=>S(o,k(a));var l=(o,a)=>{var t={};for(var r in o)g.call(o,r)&&a.indexOf(r)<0&&(t[r]=o[r]);if(o!=null&&p)for(var r of p(o))a.indexOf(r)<0&&x.call(o,r)&&(t[r]=o[r]);return t};import c,{useEffect as A,useState as B}from"react";import E from"react-dom";import J from"classnames";import{ChartLabel as X}from"../ChartLabel/ChartLabel";const Y=q=>{var h=q,{type:o,data:a,model:t,chartRef:r,component:d}=h,M=l(h,["type","data","model","chartRef","component"]);var y,L;const[T,v]=B({}),e=(L=(y=r.current)==null?void 0:y.chartInstance.canvas)==null?void 0:L.getBoundingClientRect(),O=(e==null?void 0:e.top)+window.pageYOffset+t.caretY-8,D=(e==null?void 0:e.left)+window.pageXOffset+t.caretX,I=()=>{if(!t||!t.dataPoints||!a.labels||!a.datasets||!a.datasets[0].data)return;const P=t.dataPoints[0],{index:C=-1}=P,s=l(P,["index"]),u=(t==null?void 0:t.labelColors)&&(t==null?void 0:t.labelColors[0].backgroundColor)||"",b=a.labels[C],n=a.datasets[0].data[C];v(f(i({},s),{datasetLabel:b,color:u,value:n}))},R=()=>{if(!t||!t.dataPoints)return;const n=t.dataPoints[0],{index:C}=n,s=l(n,["index"]);if(typeof s.datasetIndex!="number")return;const u=(t==null?void 0:t.labelColors)&&(t==null?void 0:t.labelColors[0].backgroundColor)||"",b=a.datasets?a.datasets[s.datasetIndex].label:"";v(f(i({},s),{datasetLabel:b,color:u}))};A(()=>{["pie","doughnut"].includes(o)?I():R()},[t,a]);const{datasetLabel:j,color:F,value:H}=T;return c.createElement("div",i({className:J("lc-chart-tooltip",{"lc-chart-tooltip-loaded":t==null?void 0:t.opacity}),style:{top:O,left:D}},M),c.createElement("div",{className:"lc-chart-tooltip-content"},d?d({data:T,chartRef:r}):c.createElement(X,{color:F,label:j,value:H})))},et=o=>{let a=document.getElementById("lc-chart-tooltip-wrapper");a||(a=document.createElement("div"),a.id="lc-chart-tooltip-wrapper",document.body.appendChild(a)),E.render(c.createElement(Y,i({},o)),a)};export{Y as ChartTooltip,et as renderChartTooltip};
//# sourceMappingURL=ChartTooltip.js.map
