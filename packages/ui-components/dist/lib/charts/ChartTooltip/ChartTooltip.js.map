{
  "version": 3,
  "sources": ["../../../../src/lib/charts/ChartTooltip/ChartTooltip.tsx"],
  "sourcesContent": ["import React, { FC, HTMLAttributes, useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport { ChartTooltipModel, ChartType } from 'chart.js';\nimport { ChartJSData, ChartRefObject, ChartTooltipComponent, ChartTooltipData } from '../chart.helpers';\nimport { ChartLabel } from '../ChartLabel/ChartLabel';\n\nexport interface ChartTooltipProps extends HTMLAttributes<HTMLDivElement> {\n  type: ChartType;\n  data: ChartJSData;\n  model: Omit<ChartTooltipModel, 'labelColors'> & { labelColors: any[] };\n  chartRef: ChartRefObject;\n  component?: ChartTooltipComponent;\n}\n\nexport const ChartTooltip: FC<ChartTooltipProps> = ({\n  type,\n  data: chartData,\n  model,\n  chartRef,\n  component,\n  ...props\n}) => {\n  // Note: setting the data in state, prevents the data from disappearing before the tooltip\n  const [tooltipData, setTooltipData] = useState<ChartTooltipData>({});\n\n  const chartElement = chartRef.current?.chartInstance.canvas?.getBoundingClientRect() as DOMRect;\n  const positionTop = chartElement?.top + window.pageYOffset + model.caretY - 8;\n  const positionLeft = chartElement?.left + window.pageXOffset + model.caretX;\n\n  const updateTooltipDataForPieCharts = () => {\n    if (!model || !model.dataPoints || !chartData.labels || !chartData.datasets) return;\n    if (!chartData.datasets[0].data) return;\n\n    const { index = -1, ...newTooltipData } = model.dataPoints[0];\n\n    const color = (model?.labelColors && model?.labelColors[0].backgroundColor) || '';\n    const datasetLabel = chartData.labels[index] as string;\n    const value = chartData.datasets[0].data[index] as number;\n\n    setTooltipData({ ...newTooltipData, datasetLabel, color, value });\n  };\n\n  const updateTooltipData = () => {\n    if (!model || !model.dataPoints) return;\n\n    const { index, ...newTooltipData } = model.dataPoints[0];\n\n    if (typeof newTooltipData.datasetIndex !== 'number') return;\n\n    const color = (model?.labelColors && model?.labelColors[0].backgroundColor) || '';\n    const datasetLabel = chartData.datasets ? chartData.datasets[newTooltipData.datasetIndex].label : '';\n\n    setTooltipData({ ...newTooltipData, datasetLabel, color });\n  };\n\n  useEffect(() => {\n    if (['pie', 'doughnut'].includes(type)) updateTooltipDataForPieCharts();\n    else updateTooltipData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [model, chartData]);\n\n  const { datasetLabel, color, value } = tooltipData;\n\n  return (\n    <div\n      className={classNames('lc-chart-tooltip', { 'lc-chart-tooltip-loaded': model?.opacity })}\n      style={{ top: positionTop, left: positionLeft }}\n      {...props}\n    >\n      <div className=\"lc-chart-tooltip-content\">\n        {component ? (\n          component({ data: tooltipData, chartRef })\n        ) : (\n          <ChartLabel color={color} label={datasetLabel} value={value} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport type RenderChartTooltipProps = (props: ChartTooltipProps) => void;\n\n// Note: Abstracted from https://github.com/reactchartjs/react-chartjs-2/issues/151#issuecomment-470282163\nexport const renderChartTooltip: RenderChartTooltipProps = props => {\n  let tooltipEl = document.getElementById('lc-chart-tooltip-wrapper');\n  if (!tooltipEl) {\n    tooltipEl = document.createElement('div');\n    tooltipEl.id = 'lc-chart-tooltip-wrapper';\n    document.body.appendChild(tooltipEl);\n  }\n\n  ReactDOM.render(<ChartTooltip {...props} />, tooltipEl);\n};\n"],
  "mappings": "+kBAAA,mDACA,yBACA,0BAGA,sDAUO,KAAM,GAAsC,AAAC,GAO9C,CAP8C,QAClD,QACA,KAAM,EACN,QACA,WACA,aALkD,EAM/C,IAN+C,EAM/C,CALH,OACA,OACA,QACA,WACA,cApBF,QAwBE,KAAM,CAAC,EAAa,GAAkB,EAA2B,IAE3D,EAAe,QAAS,UAAT,cAAkB,cAAc,SAAhC,cAAwC,wBACvD,EAAc,kBAAc,KAAM,OAAO,YAAc,EAAM,OAAS,EACtE,EAAe,kBAAc,MAAO,OAAO,YAAc,EAAM,OAE/D,EAAgC,IAAM,CAE1C,GADI,CAAC,GAAS,CAAC,EAAM,YAAc,CAAC,EAAU,QAAU,CAAC,EAAU,UAC/D,CAAC,EAAU,SAAS,GAAG,KAAM,OAEjC,KAA0C,KAAM,WAAW,GAAnD,SAAQ,IAA0B,EAAnB,IAAmB,EAAnB,CAAf,UAEF,EAAS,kBAAO,cAAe,kBAAO,YAAY,GAAG,kBAAoB,GACzE,EAAe,EAAU,OAAO,GAChC,EAAQ,EAAU,SAAS,GAAG,KAAK,GAEzC,EAAe,OAAK,GAAL,CAAqB,eAAc,QAAO,YAGrD,EAAoB,IAAM,CAC9B,GAAI,CAAC,GAAS,CAAC,EAAM,WAAY,OAEjC,KAAqC,KAAM,WAAW,GAA9C,UAA6B,EAAnB,IAAmB,EAAnB,CAAV,UAER,GAAI,MAAO,GAAe,cAAiB,SAAU,OAErD,KAAM,GAAS,kBAAO,cAAe,kBAAO,YAAY,GAAG,kBAAoB,GACzE,EAAe,EAAU,SAAW,EAAU,SAAS,EAAe,cAAc,MAAQ,GAElG,EAAe,OAAK,GAAL,CAAqB,eAAc,YAGpD,EAAU,IAAM,CACd,AAAI,CAAC,MAAO,YAAY,SAAS,GAAO,IACnC,KAEJ,CAAC,EAAO,IAEX,KAAM,CAAE,eAAc,QAAO,SAAU,EAEvC,MACE,iBAAC,MAAD,GACE,UAAW,EAAW,mBAAoB,CAAE,0BAA2B,iBAAO,UAC9E,MAAO,CAAE,IAAK,EAAa,KAAM,IAC7B,GAEJ,gBAAC,MAAD,CAAK,UAAU,4BACZ,EACC,EAAU,CAAE,KAAM,EAAa,aAE/B,gBAAC,EAAD,CAAY,MAAO,EAAO,MAAO,EAAc,MAAO,OAUnD,GAA8C,GAAS,CAClE,GAAI,GAAY,SAAS,eAAe,4BACxC,AAAK,GACH,GAAY,SAAS,cAAc,OACnC,EAAU,GAAK,2BACf,SAAS,KAAK,YAAY,IAG5B,EAAS,OAAO,gBAAC,EAAD,KAAkB,IAAW",
  "names": []
}
