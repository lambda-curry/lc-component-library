{
  "version": 3,
  "sources": ["../../../src/lib/file-uploader/FileUploaderWithImageCropper.tsx"],
  "sourcesContent": ["// Vendors\nimport React, { FC, useState } from 'react';\nimport { DropEvent } from 'react-dropzone';\n\n// Components\nimport { FileUploader } from './FileUploader';\nimport { ImageCropper } from '../image-cropper/ImageCropper';\n\n// Types\nimport { FileUpload, FileUploaderWithImageCropperProps } from './FileUploader.types';\nimport { CroppedImage } from '../image-cropper/ImageCropper.types';\n\nexport const FileUploaderWithImageCropper: FC<FileUploaderWithImageCropperProps> = ({\n  name,\n  formikProps,\n  fileUploaderProps = {},\n  imageCropperProps = {}\n}) => {\n  const { onDropAccepted, ...restFileUploaderProps } = fileUploaderProps;\n  const { onSave: onCropSave, ...restImageCropperProps } = imageCropperProps;\n\n  const initialCropState = {\n    open: false\n  };\n\n  const [crop, setCrop] = useState<{ open: boolean; file?: FileUpload }>(initialCropState);\n\n  const handleDropAccepted = (acceptedFiles: FileUpload[], event: DropEvent) => {\n    const file = acceptedFiles[0];\n    setCrop({ open: true, file });\n\n    if (onDropAccepted) onDropAccepted(acceptedFiles, event);\n  };\n\n  const handleCropSave = (newCroppedImage: CroppedImage | null) => {\n    if (formikProps?.setFieldValue) formikProps.setFieldValue(name, [newCroppedImage]);\n\n    if (onCropSave) onCropSave(newCroppedImage);\n  };\n\n  const handleCropCancel = () => {\n    if (formikProps?.setFieldValue) formikProps.setFieldValue(name, []);\n  };\n\n  return (\n    <>\n      <FileUploader\n        name={name}\n        formikProps={formikProps}\n        onDropAccepted={handleDropAccepted}\n        multiple={false}\n        {...restFileUploaderProps}\n      />\n      <ImageCropper\n        isOpen={crop.open}\n        file={crop.file}\n        mimeType={crop.file?.type}\n        fileName={crop.file?.name}\n        onAfterClose={() => setCrop(initialCropState)}\n        onSave={handleCropSave}\n        onCancel={handleCropCancel}\n        {...restImageCropperProps}\n      />\n    </>\n  );\n};\n"],
  "mappings": "2fACA,oCAIA,8CACA,6DAMO,KAAM,GAAsE,CAAC,CAClF,OACA,cACA,oBAAoB,GACpB,oBAAoB,MAChB,CAjBN,QAkBE,KAAqD,KAA7C,mBAA6C,EAA1B,IAA0B,EAA1B,CAAnB,mBACiD,IAAjD,QAAQ,GAAyC,EAA1B,IAA0B,EAA1B,CAAvB,WAEF,EAAmB,CACvB,KAAM,IAGF,CAAC,EAAM,GAAW,EAA+C,GAEjE,EAAqB,CAAC,EAA6B,IAAqB,CAC5E,KAAM,GAAO,EAAc,GAC3B,EAAQ,CAAE,KAAM,GAAM,SAElB,GAAgB,EAAe,EAAe,IAG9C,EAAiB,AAAC,GAAyC,CAC/D,AAAI,kBAAa,gBAAe,EAAY,cAAc,EAAM,CAAC,IAE7D,GAAY,EAAW,IAGvB,EAAmB,IAAM,CAC7B,AAAI,kBAAa,gBAAe,EAAY,cAAc,EAAM,KAGlE,MACE,iCACE,gBAAC,EAAD,GACE,KAAM,EACN,YAAa,EACb,eAAgB,EAChB,SAAU,IACN,IAEN,gBAAC,EAAD,GACE,OAAQ,EAAK,KACb,KAAM,EAAK,KACX,SAAU,KAAK,OAAL,cAAW,KACrB,SAAU,KAAK,OAAL,cAAW,KACrB,aAAc,IAAM,EAAQ,GAC5B,OAAQ,EACR,SAAU,GACN",
  "names": []
}
