var w=Object.defineProperty,R=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var q=(r,n,s)=>n in r?w(r,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[n]=s,o=(r,n)=>{for(var s in n||(n={}))B.call(n,s)&&q(r,s,n[s]);if(O)for(var s of O(n))M.call(n,s)&&q(r,s,n[s]);return r},g=(r,n)=>R(r,K(n));var H=(r,n)=>{var s={};for(var a in r)B.call(r,a)&&n.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&O)for(var a of O(r))n.indexOf(a)<0&&M.call(r,a)&&(s[a]=r[a]);return s};import f,{useEffect as ee,useState as te}from"react";import{Autocomplete as ne}from"@material-ui/lab";import{Paper as se,Chip as le}from"@material-ui/core";import re from"classnames";import{InputText as ae}from"../InputText/InputText";import{Icon as v}from"../../icon/Icon";import{isEqual as _,get as p,set as y}from"lodash";import"./input-select.css";import{lowercaseString as C}from"../../util/js-helpers";const Ne=oe=>{var N=oe,{options:r,optionLabelKey:n="label",optionValueKey:s,name:a,className:G,autocompleteConfig:m,onChange:A,allowCreateOption:F,disableFilterOptionsByValue:$}=N,i=H(N,["options","optionLabelKey","optionValueKey","name","className","autocompleteConfig","onChange","allowCreateOption","disableFilterOptionsByValue"]);const j=(m==null?void 0:m.freeSolo)||F,S=m==null?void 0:m.multiple,U=(e,t)=>s?p(e,s)===t||_(e,t):_(e,t),h=(e,t)=>U(e,t),J=()=>{const e=i.formikProps?p(i.formikProps.values,a):i.value,t=r.find(c=>h(c,e)),l=S?[]:null;return S||!t&&j?e||l:t||l},V=e=>{let t=!1,l=e;const c=r.find(u=>h(u,e));return c?s?p(c,s):c:(typeof e=="string"?(t=!0,l=y({},n,e)):e&&e.inputValue&&(t=!0,l=y({},n,e.inputValue)),t&&(l=y(l,s||"value",e.inputValue||e)),s&&l?p(l,s):l)},Q=e=>e.map(t=>V(t)),W=e=>S?Q(e):V(e),k=(e,t)=>e.filter(l=>{const c=p(l,n)||"",u=l&&s?p(l,s):l,P=C(t.inputValue);let d=!1;const b=C(c).includes(P);return!$&&(typeof u=="string"||typeof u=="number")&&(d=C(u).includes(P)),d||b}),I=J(),[X,E]=te(I);ee(()=>{E(I)},[I]);const Y={options:r,value:X,onChange:(e,t,l,c)=>{var d,b,D,T,z;const u=W(t);E(u);const P=((D=(b=(d=i.formikProps)==null?void 0:d.status)==null?void 0:b.formConfig)==null?void 0:D.safeName)||((T=i.inputConfig)==null?void 0:T.safeName);((z=i.formikProps)==null?void 0:z.setFieldValue)&&i.formikProps.setFieldValue(P?`['${a}']`:a,u),typeof A=="function"&&A(e,u,l,c)},openOnFocus:!0,closeIcon:f.createElement(v,{className:"lc-input-select-icon-close",name:"close"}),popupIcon:f.createElement(v,{className:"lc-input-select-icon-popup",name:"chevronDown"}),renderInput:e=>{const t=g(o(o({},e.inputProps),i.inputProps),{disabled:i.disabled});return f.createElement(ae,g(o(o({name:a},e),i),{inputProps:t,formikProps:g(o({},i.formikProps),{handleChange:void 0})}))},PaperComponent:e=>f.createElement(se,o({className:"lc-input-select-paper"},e)),getOptionLabel:e=>p(e,n)||"",getOptionDisabled:e=>e.isDisabled,getOptionSelected:h,filterOptions:k,disableClearable:!0,autoHighlight:!1,autoSelect:!1,autoComplete:!0,renderTags:(e,t)=>f.createElement(f.Fragment,null,e.map((l,c)=>{const u=r.find(d=>h(d,l)),P=u?p(u,n):p(l,n)||l;return f.createElement(le,g(o({},t({index:c})),{deleteIcon:f.createElement(v,{name:"close"}),label:P}))}))},x={disableClearable:!1,autoHighlight:!1,autoSelect:!1,getOptionLabel:e=>typeof e=="string"||typeof e=="number"?e:e.inputValue?e.inputValue:p(e,n)},Z=g(o({},x),{filterOptions:(e,t)=>{const l=k(e,t);return t.inputValue!==""&&l.unshift(y({inputValue:t.inputValue},n,`Use "${t.inputValue}"`)),l},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,renderOption:e=>p(e,n)}),L=o(o(o(o({},Y),(m==null?void 0:m.freeSolo)?x:{}),F?Z:{}),m);return f.createElement(ne,o({className:re("lc-input-select",G)},L))};export{Ne as InputSelect};
//# sourceMappingURL=InputSelect.js.map
