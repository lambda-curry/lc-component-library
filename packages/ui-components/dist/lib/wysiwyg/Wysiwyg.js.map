{
  "version": 3,
  "sources": ["../../../src/lib/wysiwyg/Wysiwyg.tsx"],
  "sourcesContent": ["import React, { useEffect, FunctionComponent } from 'react';\nimport ReactQuill, { ReactQuillProps, QuillOptions } from 'react-quill';\nimport { FormikProps } from 'formik';\nimport { get as _get } from 'lodash';\nimport { MultilineInput } from '../multiline-input';\n\nimport './wysiwyg.css';\n\nexport interface WysiwygProps extends ReactQuillProps {\n  name: string;\n  formikProps: FormikProps<any>;\n  templateVariables?: string[];\n  characterLimit?: number;\n}\n\nconst quillConfig: QuillOptions = {\n  theme: 'snow',\n  modules: {\n    toolbar: {\n      container: [\n        [{ header: [1, 2, 3, false] }],\n        ['bold', 'italic', 'underline', 'link'],\n        [{ list: 'ordered' }, { list: 'bullet' }],\n        [{ align: [] }],\n        ['clean'],\n        [{ placeholder: ['{{Example Placeholder 1}}', '{{Example Placeholder 2}}'] }]\n      ],\n      handlers: {\n        placeholder: function (value: any) {\n          if (!value) {\n            return;\n          }\n\n          const wrapper = this as any;\n          const cursorPosition = wrapper.quill.getSelection().index;\n          wrapper.quill.insertText(cursorPosition, value);\n          wrapper.quill.setSelection(cursorPosition + value.length);\n        }\n      }\n    }\n  }\n};\n\nexport const Wysiwyg: FunctionComponent<WysiwygProps> = ({\n  placeholder = 'Enter your text here...',\n  characterLimit = 0,\n  formikProps,\n  ...props\n}) => {\n  const fieldValue = _get(formikProps.values, props.name);\n\n  useEffect(() => {\n    // We need to manually supply the HTML content of our custom dropdown list\n    const placeholderPickerItems = document.querySelectorAll('.ql-placeholder .ql-picker-item');\n\n    placeholderPickerItems.forEach((item: any) => (item.textContent = item.dataset.value));\n    const quillPlaceholderLabel = document.querySelector('.ql-placeholder .ql-picker-label');\n    if (quillPlaceholderLabel) {\n      quillPlaceholderLabel.innerHTML =\n        'Insert placeholder&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' +\n        document.querySelector('.ql-placeholder .ql-picker-label')?.innerHTML;\n    }\n  }, []);\n\n  return (\n    <MultilineInput value={fieldValue} characterLimit={characterLimit}>\n      {({ previousValue, characterCount }) => {\n        const handleChange = (value: string) => {\n          let newValue = value;\n          const newValueLength = newValue.length;\n          const previousValueLength = previousValue.length;\n\n          // Enforce the character limit if it is set\n          if (characterLimit && newValueLength > previousValueLength && characterCount >= characterLimit) {\n            newValue = previousValue;\n          }\n\n          // Make sure we set a true empty value to avoid saving extra\n          // space when the editor is cleared out.\n          if (newValue === '<p><br></p>') {\n            newValue = '';\n          }\n\n          formikProps.setFieldValue(props.name, newValue);\n        };\n\n        return (\n          <ReactQuill\n            className=\"wysiwyg-editor\"\n            placeholder={placeholder}\n            theme={quillConfig.theme}\n            modules={quillConfig.modules}\n            value={fieldValue}\n            onChange={handleChange}\n            {...props}\n          />\n        );\n      }}\n    </MultilineInput>\n  );\n};\n"],
  "mappings": "2fAAA,qCACA,2BAEA,6BACA,oDAEA,sBASA,KAAM,GAA4B,CAChC,MAAO,OACP,QAAS,CACP,QAAS,CACP,UAAW,CACT,CAAC,CAAE,OAAQ,CAAC,EAAG,EAAG,EAAG,MACrB,CAAC,OAAQ,SAAU,YAAa,QAChC,CAAC,CAAE,KAAM,WAAa,CAAE,KAAM,WAC9B,CAAC,CAAE,MAAO,KACV,CAAC,SACD,CAAC,CAAE,YAAa,CAAC,4BAA6B,gCAEhD,SAAU,CACR,YAAa,SAAU,EAAY,CACjC,GAAI,CAAC,EACH,OAGF,KAAM,GAAU,KACV,EAAiB,EAAQ,MAAM,eAAe,MACpD,EAAQ,MAAM,WAAW,EAAgB,GACzC,EAAQ,MAAM,aAAa,EAAiB,EAAM,aAO/C,EAA2C,AAAC,GAKnD,CALmD,QACvD,eAAc,0BACd,iBAAiB,EACjB,eAHuD,EAIpD,IAJoD,EAIpD,CAHH,cACA,iBACA,gBAGA,KAAM,GAAa,EAAK,EAAY,OAAQ,EAAM,MAElD,SAAU,IAAM,CAnDlB,MAuDI,AAF+B,SAAS,iBAAiB,mCAElC,QAAQ,AAAC,GAAe,EAAK,YAAc,EAAK,QAAQ,OAC/E,KAAM,GAAwB,SAAS,cAAc,oCACrD,AAAI,GACF,GAAsB,UACpB,mDACA,aAAS,cAAc,sCAAvB,cAA4D,aAE/D,IAGD,gBAAC,EAAD,CAAgB,MAAO,EAAY,eAAgB,GAChD,CAAC,CAAE,gBAAe,oBAAqB,CACtC,KAAM,GAAe,AAAC,GAAkB,CACtC,GAAI,GAAW,EACf,KAAM,GAAiB,EAAS,OAC1B,EAAsB,EAAc,OAG1C,AAAI,GAAkB,EAAiB,GAAuB,GAAkB,GAC9E,GAAW,GAKT,IAAa,eACf,GAAW,IAGb,EAAY,cAAc,EAAM,KAAM,IAGxC,MACE,iBAAC,EAAD,GACE,UAAU,iBACV,YAAa,EACb,MAAO,EAAY,MACnB,QAAS,EAAY,QACrB,MAAO,EACP,SAAU,GACN",
  "names": []
}
