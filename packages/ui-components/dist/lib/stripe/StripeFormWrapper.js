var b=Object.defineProperty,h=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var s=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;var d=(r,e,t)=>e in r?b(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,m=(r,e)=>{for(var t in e||(e={}))l.call(e,t)&&d(r,t,e[t]);if(s)for(var t of s(e))u.call(e,t)&&d(r,t,e[t]);return r},g=(r,e)=>h(r,v(e));var a=(r,e)=>{var t={};for(var o in r)l.call(r,o)&&e.indexOf(o)<0&&(t[o]=r[o]);if(r!=null&&s)for(var o of s(r))e.indexOf(o)<0&&u.call(r,o)&&(t[o]=r[o]);return t};import c from"react";import*as w from"@stripe/stripe-js";import{CardElement as x,Elements as j,useElements as T,useStripe as q}from"@stripe/react-stripe-js";import{Form as H}from"../form";const I=r=>{const e=T(),t=q(),f=r,{onSubmit:o,onError:i}=f,C=a(f,["onSubmit","onError"]),P=async(W,F)=>{const{setSubmitting:E,setStatus:S}=F,p=y=>(E(!1),i&&i(y));if(E(!0),!e)return p("no stripe elements");const k=e.getElement(x);if(!k)return p("no stripe card");const n=await(t==null?void 0:t.createToken(k));if(n==null?void 0:n.error)return S({serverErrors:[n.error.message]});if(!(n==null?void 0:n.token))return p("no stripe token");S({serverErrors:[]}),o({values:W,token:n.token},F)};return c.createElement(H,g(m(m({},C),r),{onSubmit:P}))},J=t=>{var o=t,{STRIPE_KEY:r}=o,e=a(o,["STRIPE_KEY"]);if(!r)throw new Error("STRIPE_KEY is required for StripeFormWrapper");const i=w.loadStripe(r);return c.createElement(j,{stripe:i},c.createElement(I,m({},e)))};export{J as StripeFormWrapper};
//# sourceMappingURL=StripeFormWrapper.js.map
