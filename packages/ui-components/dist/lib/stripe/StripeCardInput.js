var A=Object.defineProperty,$=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var g=(t,r,e)=>r in t?A(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,d=(t,r)=>{for(var e in r||(r={}))z.call(r,e)&&g(t,e,r[e]);if(E)for(var e of E(r))L.call(r,e)&&g(t,e,r[e]);return t},S=(t,r)=>$(t,w(r));import p,{useState as O}from"react";import{CardElement as V}from"@stripe/react-stripe-js";import{useField as W,useFormikContext as J}from"formik";import"./stripe-card-input.css";import{arrayToListString as v}from"../util/formatters";import U from"classnames";import{get as y,set as j}from"lodash";const q={style:{base:{color:"black",fontFamily:'"gilroy", sans-serif',fontSize:"18px","::placeholder":{color:"#a0a5ba",fontSize:"16px"},iconColor:"#0068ff"},invalid:{color:"#ff4500",iconColor:"darkred"}}},l={visa:"Visa",mastercard:"Mastercard",amex:"American Express",discover:"Discover",diners:"Diners Club",jcb:"JCB",unionpay:"UnionPay"},tr=({name:t,label:r,acceptedBrands:e,acceptedBrandsErrorMessage:h,rejectedBrands:i,rejectedBrandsErrorMessage:M})=>{const[c,x]=O(),b=n=>{const s=h;return s?typeof s=="function"?s(n):s:`We do not accept ${l[n]}. Please try ${v((e==null?void 0:e.map(a=>l[a]))||[]," or ")}.`},B=n=>{const s=M;return s?typeof s=="function"?s(n):s:`We do not accept ${v((i==null?void 0:i.map(a=>l[a]))||[]," or ")}. Please try a different card.`},N=n=>{if(!c||c.empty)return"Please enter your credit card information.";const{error:s,brand:a}=c;if(s)return s.message;if(a!=="unknown"){if(i&&i.includes(a))return B(a);if(e&&!e.includes(a))return b(a)}},{status:o,setStatus:P}=J(),u=(o==null?void 0:o.serverErrors)&&t&&y(o.serverErrors,t)?y(o.serverErrors,t):"",[,k,F]=W({name:t,validate:N}),{error:m}=k,{setValue:D,setTouched:f}=F,C=!!m||!!u,T=m||u,I=n=>{(o==null?void 0:o.serverErrors)&&P(S(d({},o),{serverErrors:d({},j(o.serverErrors,t,""))})),x(n),D(n.complete,!0),f(!0)},_=()=>f(!0);return p.createElement("div",{className:U("lc-stripe-card-input",{"lc-stripe-card-input-invalid":C})},r&&p.createElement("label",{className:"lc-stripe-card-input-label",htmlFor:r},r),p.createElement(V,{id:r,options:q,onChange:I,onBlur:_}),C&&p.createElement("div",{className:"lc-stripe-card-input-error"},T))};export{tr as StripeCardInput};
//# sourceMappingURL=StripeCardInput.js.map
